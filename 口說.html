<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot</title>
    <style>
        #chat-container {
        	background:transparent;
        	border:2px solid rgba(255,255,255,.5);
			border-radius:20px;
			backdrop-filter:blur(20px);
			box-shadow:0 0 30px rgba(0,0,0,.5);
            max-width: 400px;
            margin: auto;
            padding: 20px;

        }

        #messages {
            margin-bottom: 10px;
        }

        #input-container {
            display: flex;
        }

        #user-input {
            flex-grow: 1;
            padding: 8px;
        }

        #send-button {
            padding: 8px;
            cursor: pointer;
            background:transparent;
            margin: auto;
            border:2px solid rgba(255,255,255,.5);
        }
    </style>
</head>
<body>

<div id="chat-container">
    <div id="messages"></div>
    <div id="input-container">
        <button id="send-button" onclick="startListening()">Start Listening</button>
    </div>
</div>

<script>
    const messagesContainer = document.getElementById('messages');
    const sendButton = document.getElementById('send-button');

   	function startListening() {
        sendButton.disabled = true;
        const recognition = new window.webkitSpeechRecognition(); // 使用webkitSpeechRecognition來支援Chrome
        recognition.lang = 'en-US';

        recognition.onresult = function (event) {
            const userMessage = event.results[0][0].transcript;
            displayMessage('You: ' + userMessage);
            respondToUser(userMessage);
            recognition.stop();
            sendButton.disabled = false;
        };

        recognition.onend = function () {
            sendButton.disabled = false;
        };

        recognition.start();
    }


    function respondToUser(message) {
        let response = 'I\'m sorry, I don\'t understand.';
        
        // 對不同的用戶輸入進行回應
        if (message.toLowerCase().includes('how are you')) {
            response = 'I\'m fine, thank you!';
        } else if (message.toLowerCase().includes('hello')) {
            response = 'Hi there!';
        } else if (message.toLowerCase().includes('goodbye')) {
            response = 'Goodbye!';
        }

        displayMessage('Bot: ' + response);
    }

    function displayMessage(message) {
        const messageElement = document.createElement('div');
        messageElement.textContent = message;
        messagesContainer.appendChild(messageElement);
    }
</script>

</body>
</html>